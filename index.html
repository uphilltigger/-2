<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>飼料計算</title>
	<style>
	body { font-size: 16px; margin:0; padding: 1rem; background:#ffffff; width: 100%; max-width: 600px; user-select: none; }
	.table-container { padding:1rem; }
	table { border-collapse:collapse; width: 100%; }
	th, td { border:1px solid #ccc; padding-left:0.5rem; padding-right:0.5rem; text-align:center; vertical-align:middle; white-space: nowrap; }
	thead { background:#eee; }
	input { font-size: 20px; width: 2.2em; text-align: right; border-color: red; background-color:rgba(255, 255, 0, 0.2); }
	input:focus { border-color: #3182ce; outline: none; }
	.feed-total{border: 0px; background:#ffffff; }
	.sum{border: 0px; background:#ffffff; }
	select { font-size: 20px; margin-bottom:0.5rem; border-color: red; background-color:rgba(255, 255, 0, 0.2); }
	.bar-container {width: 100%; height: 24px; background: silver; border-radius: 4px; overflow: hidden; display:inline-block; position: relative; }
	.bar-fill { height:100%; width:0%; border-radius: 2px; transition: width 0.25s ease; }
	.bar-container .bar-label{position: absolute; line-height: 1; color: #fff; font-size: 15px; right: 4px; font-weight: bold; }
	button{ background: darkgrey; color: #000; width: 20%; }
	button:hover{ background: #fff; color: #000; cursor: pointer; }
	a{ color: blue; }
	a:visited{ color: blue; }
	a:hover{ color: red; }
	</style>
</head>
<body>
	<h1>飼料計算</h1>
	<p>
	<a href="https://github.com/uphilltigger/-2" target="_blank">説明を見る↗（別タブで開きます）</a>
<!--
	<details>
  	<summary style="text-decoration: underline; color: blue;">説明を見る</summary>
	  	<div>
		<hr>
		ウマと運動強度を選んで、給餌量を入力すれば充足率がわかるようになっています．<br>
		考え出したらキリが無いので、DE,CPと下の表の3つの値が問題なければ良しとしましょう。<br>  
		・入力値は一食あたり．<br>
		・各値の表示：	青＝不足，緑＝理想，赤＝過剰<br>
		<br>
		DE＝エネルギー<br>
		CP＝タンパク質<br>
		Zn=亜鉛：蹄の角質化に必要<br>
		VA（ビタミンA）：過剰に注意<br>
		VD（ビタミンD）：日光浴びれば大丈夫
		<hr>
		</div>
	</details>
-->
	</p>
	<div>
	  <label>ウマ：
	    <select id="weight">
	      <option value="" selected disabled>--選択してください--</option>
	      <option value="500" class="senior">アップヒルティガー</option>
	      <option value="540">グランシエロ</option>
	      <option value="500">キタノインパクト</option>
	      <option value="520">テイエムシュンソク</option>
	      <option value="470">ワイルドヒロイン</option>
	      <option value="500">ドラゴンケーニッヒ</option>
	      <option value="470">フェンネル</option>
	      <option value="520" class="senior">タイダルベイスン</option>
	      <option value="520">ノガロ</option>
	      <option value="540" class="nobeet">ダノンクライム</option>
	      <option value="470">ピースオブエイト</option>
	      <option value="500" class="senior">アドマイヤカーリン</option>
	      <option value="470">キタノブルー</option>
	      <hr>
	      <option value="400">汎用：400 kg</option>
	      <option value="450">汎用：450 kg</option>
	      <option value="500">汎用：500 kg</option>
	    </select>
	  </label>
	  <br>
	  <label>運動強度：
	    <select id="work">
	      <option value="" selected disabled>--選択してください--</option>
	      <option value="無">無（積雪期）</option>
	      <option value="軽">軽（春先，馬場凍結前）</option>
	      <option value="中">中（普段）</option>
	      <option value="強">強（真夏）</option>
	    </select>
	  </label>
	</div>
<hr>
	<div id="main-content">
		<small>（下表に値を入れると文言が変わります）</small>
		<div class="table-container" id="alert-messages"><span id="horse-attribute"></span></div>
		<hr>
		<button id="reset-btn">初期化する</button>
		<div class="table-container">
		  <table id="feed-table">
		    <thead><tr><th>飼料名</th><th>朝夕</th><th>昼夜</th><th>合計</th></tr></thead>
		    <tbody id="feed-body"></tbody>
		    <tbody id="sum-body"></tbody>
		  </table>
		</div>
		<div class="table-container" id="result"></div>
		<div class="table-container" id="result-balance"></div>
<hr>
	</div>
<p style="text-align: center;">
	<b>&copy;2025-2026 MIURA SOTA</b>
</p>
<script>
// 飼料
const feeds = [
  {name:"ビート", DE:2.85, CP:109.00, Lys:7.20, Ca:5.11, P:0.78, Mg:2.68, Na:1.04, K:4.16, Fe:519.60, Cu:9.27, Zn:27.71, Mn:53.69, Se:0.00, Co:0.20, VA:28, VD:9, VE:0.00, default1:"", default2:""},
  {name:"燕麦", DE:2.76, CP:106.58, Lys:5.60, Ca:0.45, P:3.01, Mg:1.22, Na:0.34, K:3.55, Fe:44.01, Cu:3.52, Zn:31.60, Mn:45.61, Se:0.05, Co:0.11, VA:5, VD:0.00, VE:4, default1:"", default2:0.5},
  {name:"キューブ", DE:1.80, CP:147.00, Lys:0.00, Ca:11.80, P:2.60, Mg:2.60, Na:1.60, K:22.40, Fe:446.00, Cu:8.20, Zn:24.00, Mn:34.80, Se:0.00, Co:1.52, VA:10, VD:3, VE:80, default1:"", default2:""},
  {name:"大豆粕", DE:13.13, CP:461.00, Lys:28.30, Ca:2.90, P:6.20, Mg:3.20, Na:0.30, K:0.00, Fe:0.00, Cu:18.00, Zn:56.00, Mn:0.00, Se:0.45, Co:0.00, VA:56, VD:18, VE:0.45, default1:"", default2:""},
  {name:"ベルテ", DE:2.52, CP:184.8, Lys:9.90, Ca:13.40, P:24.20, Mg:2.50, Na:12.00, K:13.40, Fe:563.42, Cu:133.63, Zn:331.66, Mn:206.02, Se:0.00, Co:0.53, VA:45866, VD:4080, VE:688, default1:"", default2:""},
  {name:"濃厚", DE:3.12, CP:144.00, Lys:7.00, Ca:31.00, P:12.30, Mg:2.20, Na:9.30, K:9.80, Fe:340.01, Cu:88.69, Zn:219.27, Mn:153.67, Se:1.21, Co:0.54, VA:29, VD:3, VE:865, default1:"", default2:""},
  {name:"ふすま", DE:2.68, CP:157.00, Lys:6.30, Ca:1.20, P:9.80, Mg:4.40, Na:0.80, K:0.00, Fe:0.00, Cu:11.00, Zn:70.00, Mn:0.00, Se:0.00, Co:0.00, VA:70, VD:11, VE:0.51, default1:"", default2:0.4},
  {name:"塩", DE:0.00, CP:0.00, Lys:0.00, Ca:0.30, P:0.00, Mg:0.00, Na:392.00, K:0.00, Fe:0.00, Cu:0.00, Zn:0.00, Mn:0.00, Se:0.00, Co:0.00, VA:0.00, VD:0.00, VE:0.00, default1:0.01, default2:0.01},
  {name:"乾草", DE:1.35, CP:57.00, Lys:2.70, Ca:0.00, P:0.00, Mg:0.00, Na:0.00, K:0.00, Fe:81.30, Cu:7.07, Zn:21.95, Mn:94.31, Se:0.00, Co:0.03, VA:20, VD:10, VE:50, default1:1, default2:1}
];

// 要求量
const reqTable = [
  {weight:400, work:"無", DE:13.4, CP:536, Lys:23.05, Ca:16, P:11.2, Mg:6, Na:8, K:20, Fe:320, Cu:120, Zn:360, Mn:360, Se:1.5, Co:0.4, VA:16000, VD:2640, VE:640},
  {weight:400, work:"軽", DE:16.08, CP:643.2, Lys:27.66, Ca:24, P:14.4, Mg:7.4, Na:21, K:49, Fe:320, Cu:120, Zn:360, Mn:360, Se:1.75, Co:0.4, VA:16000, VD:2640, VE:640},
  {weight:400, work:"中", DE:18.76, CP:750.4, Lys:32.27, Ca:28, P:16.8, Mg:8.63, Na:21, K:49, Fe:360, Cu:135, Zn:405, Mn:405, Se:2.25, Co:0.45, VA:18000, VD:2640, VE:720},
  {weight:400, work:"強", DE:21.44, CP:857.6, Lys:36.88, Ca:32, P:23.2, Mg:9.86, Na:27, K:63, Fe:400, Cu:150, Zn:450, Mn:450, Se:2.5, Co:0.5, VA:20000, VD:2640, VE:800},
  {weight:450, work:"無", DE:14.9, CP:596, Lys:25.63, Ca:18, P:12.6, Mg:6.75, Na:9, K:22.5, Fe:360, Cu:135, Zn:405, Mn:405, Se:1.69, Co:0.45, VA:18000, VD:2970, VE:720},
  {weight:450, work:"軽", DE:17.88, CP:715.2, Lys:30.75, Ca:27, P:16.2, Mg:8.22, Na:23.63, K:55.13, Fe:360, Cu:135, Zn:405, Mn:405, Se:1.97, Co:0.45, VA:18000, VD:2970, VE:720},
  {weight:450, work:"中", DE:20.86, CP:834.4, Lys:35.88, Ca:31.5, P:18.9, Mg:9.6, Na:23.63, K:55.13, Fe:405, Cu:151.88, Zn:455.63, Mn:455.63, Se:2.53, Co:0.51, VA:20250, VD:2970, VE:810},
  {weight:450, work:"強", DE:23.84, CP:953.6, Lys:41, Ca:36, P:26.1, Mg:10.97, Na:30.38, K:70.88, Fe:450, Cu:168.75, Zn:506.25, Mn:506.25, Se:2.81, Co:0.56, VA:22500, VD:2970, VE:900},
  {weight:470, work:"無", DE:15.5, CP:620, Lys:26.66, Ca:18.8, P:13.16, Mg:7.05, Na:9.4, K:23.5, Fe:376, Cu:141, Zn:423, Mn:423, Se:1.762, Co:0.47, VA:18800, VD:3102, VE:752},
  {weight:470, work:"軽", DE:18.6, CP:744, Lys:31.99, Ca:28.2, P:16.92, Mg:8.56, Na:24.67, K:57.57, Fe:376, Cu:141, Zn:423, Mn:423, Se:2.056, Co:0.47, VA:18800, VD:3102, VE:752},
  {weight:470, work:"中", DE:21.7, CP:868, Lys:37.32, Ca:32.9, P:19.74, Mg:9.98, Na:24.67, K:57.57, Fe:423, Cu:158.63, Zn:475.88, Mn:475.88, Se:2.644, Co:0.529, VA:21150, VD:3102, VE:846},
  {weight:470, work:"強", DE:24.8, CP:992, Lys:42.66, Ca:37.6, P:27.26, Mg:11.41, Na:31.72, K:74.02, Fe:470, Cu:176.25, Zn:528.75, Mn:528.75, Se:2.938, Co:0.588, VA:23500, VD:3102, VE:940},
  {weight:500, work:"無", DE:16.4, CP:656, Lys:28.21, Ca:20, P:14, Mg:7.5, Na:10, K:25, Fe:400, Cu:150, Zn:450, Mn:450, Se:1.88, Co:0.5, VA:20000, VD:3300, VE:800},
  {weight:500, work:"軽", DE:19.68, CP:787.2, Lys:33.85, Ca:30, P:18, Mg:9.05, Na:26.25, K:61.25, Fe:400, Cu:150, Zn:450, Mn:450, Se:2.19, Co:0.5, VA:20000, VD:3300, VE:800},
  {weight:500, work:"中", DE:22.96, CP:918.4, Lys:39.49, Ca:35, P:21, Mg:10.56, Na:26.25, K:61.25, Fe:450, Cu:168.75, Zn:506.25, Mn:506.25, Se:2.81, Co:0.56, VA:22500, VD:3300, VE:900},
  {weight:500, work:"強", DE:26.24, CP:1049.6, Lys:45.13, Ca:40, P:29, Mg:12.07, Na:33.75, K:78.75, Fe:500, Cu:187.5, Zn:562.5, Mn:562.5, Se:3.13, Co:0.63, VA:25000, VD:3300, VE:1000},
  {weight:520, work:"無", DE:17, CP:680, Lys:29.24, Ca:20.8, P:14.56, Mg:7.8, Na:10.4, K:26, Fe:416, Cu:156, Zn:468, Mn:468, Se:1.95, Co:0.52, VA:20800, VD:3432, VE:832},
  {weight:520, work:"軽", DE:20.4, CP:816, Lys:35.09, Ca:31.2, P:18.72, Mg:9.38, Na:27.3, K:63.7, Fe:416, Cu:156, Zn:468, Mn:468, Se:2.275, Co:0.52, VA:20800, VD:3432, VE:832},
  {weight:520, work:"中", DE:23.8, CP:952, Lys:40.94, Ca:36.4, P:21.84, Mg:10.95, Na:27.3, K:63.7, Fe:468, Cu:175.5, Zn:526.5, Mn:526.5, Se:2.925, Co:0.585, VA:23400, VD:3432, VE:936},
  {weight:520, work:"強", DE:27.2, CP:1088, Lys:46.78, Ca:41.6, P:30.16, Mg:12.51, Na:35.1, K:81.9, Fe:520, Cu:195, Zn:585, Mn:585, Se:3.25, Co:0.65, VA:26000, VD:3432, VE:1040},
  {weight:540, work:"無", DE:17.6, CP:704, Lys:30.27, Ca:21.6, P:15.12, Mg:8.1, Na:10.8, K:27, Fe:432, Cu:162, Zn:486, Mn:486, Se:2.025, Co:0.54, VA:21600, VD:3564, VE:864},
  {weight:540, work:"軽", DE:21.12, CP:844.8, Lys:36.33, Ca:32.4, P:19.44, Mg:9.72, Na:28.35, K:66.15, Fe:432, Cu:162, Zn:486, Mn:486, Se:2.363, Co:0.54, VA:21600, VD:3564, VE:864},
  {weight:540, work:"中", DE:24.64, CP:985.6, Lys:42.38, Ca:37.8, P:22.68, Mg:11.33, Na:28.35, K:66.15, Fe:486, Cu:182.25, Zn:546.75, Mn:546.75, Se:3.038, Co:0.608, VA:24300, VD:3564, VE:972},
  {weight:540, work:"強", DE:28.16, CP:1126, Lys:48.44, Ca:43.2, P:31.32, Mg:12.95, Na:36.45, K:85.05, Fe:540, Cu:202.5, Zn:607.5, Mn:607.5, Se:3.375, Co:0.675, VA:27000, VD:3564, VE:1080},

];
function getRequirements(weight, work){
  return reqTable.find(r=>r.weight==weight && r.work==work) || reqTable[0];
}

//単位
const units = {
  DE: "Mcal", CP: "g", Lys: "g", Ca: "g", P: "g", Mg: "g", Na: "g", K: "g", Fe: "mg", Cu: "mg", Zn: "mg", Mn: "mg", Se: "mg", Co: "mg", VA: "IU", VD: "IU", VE: "IU"
};


// 行作成
function createRows(){
  const feedBody = document.getElementById("feed-body");
  feeds.forEach(f=>{
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${f.name}</td>
      <td><input type="number" class="feed-amount1" value="${f.default1}" step="0.1" min="0">kg</td>
      <td><input type="number" class="feed-amount2" value="${f.default2}" step="0.1" min="0">kg</td>
      <td><input type="number" class="feed-total" value="0" readonly>kg</td>
    `;
    feedBody.appendChild(row);

    const input1 = row.querySelector(".feed-amount1");
    const input2 = row.querySelector(".feed-amount2");
    const total = row.querySelector(".feed-total");

    function updateTotal(){
      total.value = ((parseFloat(input1.value||0)+parseFloat(input2.value||0))*2).toFixed(2);
      calculate();
    }

    input1.addEventListener("input", updateTotal);
    input2.addEventListener("input", updateTotal);
    updateTotal();
  });
}


function calculate() {
  const weightVal = document.getElementById("weight").value;
  const workVal = document.getElementById("work").value;
  const mainContent = document.getElementById("main-content");

  let sum = {DE:0, CP:0, Lys:0, Ca:0, P:0, Mg:0, Na:0, K:0, Fe:0, Cu:0, Zn:0, Mn:0, Se:0, Co:0, VA:0, VD:0, VE:0};
  let totalFeedWeight = 0; // 栄養素計算用の総給餌量

  document.querySelectorAll("#feed-body tr").forEach((tr, i) => {
    const val1 = parseFloat(tr.querySelector(".feed-amount1").value || 0);
    const val2 = parseFloat(tr.querySelector(".feed-amount2").value || 0);
    const total = (val1 + val2) * 2;
    totalFeedWeight += total; // 栄養素計算用

    const feed = feeds[i];
    for(const key in sum) sum[key] += feed[key] * total;
  });

  const weight = parseInt(document.getElementById("weight").value);
  const work = document.getElementById("work").value;
  const req = getRequirements(weight, work);
  const ca_p = sum["Ca"] / sum["P"];
  const zn_cu = sum["Zn"] / sum["Cu"];
  const total_bw = totalFeedWeight / weight * 100; 

  // カラー設定関数
	function colorize(value, min, max) {
	  return (value < min) ? "rgba(0, 0, 255, 0.2)" : (value > max ? "rgba(255, 0, 0, 0.2)" : "rgba(0, 255, 0, 0.2)");
  }

  // 栄養素テーブル
	let html = `
	<table>
	  <thead>
	    <tr><th colspan="2">栄養素</th><th>要求量</th><th>給餌量</th><th width="50%">充足率</th></tr>
	  </thead>
	  <tbody>
	`;

	for (const key in sum) {
	  const rate = (sum[key] / req[key] * 100);
	  const rateText = rate.toFixed(1);
	  let color = "darkgreen";
	  if (rate > 120) color = "firebrick";
	  else if (rate < 80) color = "darkblue";

	  html += `
	    <tr>
	      <td>${key}</td>
	      <td style="font-size: 15px;">${units[key] || ""}</td>
	      <td style="text-align: right;">${req[key]}</td>
	      <td style="text-align: right;">${sum[key].toFixed(2)}</td>
	      <td>
	        <div class="bar-container"><span class="bar-label">${rateText}%</span>
	          <div class="bar-fill" style="width:${Math.min(rate,150)}%; background:${color};"></div>
	        </div>
	      </td>
	    </tr>`;
	}
	html += "</tbody></table>";
	document.getElementById("result").innerHTML = html;

  // 栄養バランス比テーブル
  let htmlbalance = `
  <table class="balance-table">
    <thead>
      <tr><th></th><th>理想値</th><th>計算結果</th></tr>
    </thead>
    <tbody>
      <tr><td>Ca/P</td><td>1.5~2.0（1~6ならOK）</td><td style="background-color:${colorize(ca_p,1,6)}; text-align:right;">${ca_p.toFixed(1)}</td></tr>
      <tr><td>Zn/Cu</td><td>3~6</td><td style="background-color:${colorize(zn_cu,3,6)}; text-align:right;">${zn_cu.toFixed(1)}</td></tr>
      <tr><td>体重比</td><td>1.5~2.5%</td><td style="background-color:${colorize(total_bw,1.5,2.5)}; text-align:right;">${total_bw.toFixed(1)}%</td></tr>
    </tbody>
  </table>`;
  document.getElementById("result-balance").innerHTML = htmlbalance;


const alertEl = document.getElementById("alert-messages");
  let messages = [];

  const weightSelect = document.getElementById("weight");
  const selectedOption = weightSelect.options[weightSelect.selectedIndex];

  if (selectedOption.classList.contains("senior")) {
      messages.push("<span>&#12959; 高齢馬なので濃厚は控えめに．</span>");
  }
  if (selectedOption.classList.contains("nobeet")) {
      const beetRow = document.querySelectorAll("#feed-body tr")[0]; // ビートは一番上の行
      const beetVal1 = parseFloat(beetRow.querySelector(".feed-amount1").value || 0);
      const beetVal2 = parseFloat(beetRow.querySelector(".feed-amount2").value || 0);
      const beetTotal = (beetVal1 + beetVal2) * 2;
      if (beetTotal > 0) {
          messages.push("<span style='color: firebrick;'>&#9888; クライムは喉詰まりを起こすのでビートNG</span>");
      } else {
          messages.push("<span style='color: darkgreen;'>&#12959; クライムは喉詰まりを起こすのでビートNG</span>");
      }
  }

  //エネルギー
  const deRate = (sum["DE"] / req["DE"]) * 100;
  if (deRate < 90) {
      messages.push("<span style='color: darkblue;'>&#9888;エネルギー(DE)が不足しています（" + deRate.toFixed(1) + "%）</span>");
  } else if (deRate > 120) {
      messages.push("<span style='color: firebrick;'>&#9888; エネルギー(DE)が過剰です（" + deRate.toFixed(1) + "%）</span>");
  } else {
      messages.push("<span style='color: darkgreen;'>&check; エネルギー(DE)は十分です（" + deRate.toFixed(1) + "%）</span>");
  }

  //タンパク質
  const cpRate = (sum["CP"] / req["CP"]) * 100;
  if (cpRate < 90) {
      messages.push("<span style='color: darkblue;'>&#9888; タンパク質(CP)が不足しています（" + cpRate.toFixed(1) + "%）</span>");
  } else if (cpRate > 150) {
      messages.push("<span style='color: firebrick;'>&#9888; タンパク質(CP)が過剰です（" + cpRate.toFixed(1) + "%）</span>");
  } else {
      messages.push("<span style='color: darkgreen;'>&check; タンパク質(CP)は十分です（" + cpRate.toFixed(1) + "%）</span>");
  }

  // Ca/P
  if (ca_p < 1.0) {
      messages.push("<span style='color: darkblue;'>&#9888; Ca/Pが低すぎます</span>");
  } else if (ca_p > 6.0) {
      messages.push("<span style='color: firebrick;'>&#9888; Ca/Pが高すぎます</span>");
  } else {
      messages.push("<span style='color: darkgreen;'>&check; Ca/Pは適正です</span>");
  }

  //Zn/Cu
  if (zn_cu < 3.0) {
      messages.push("<span style='color: darkblue;'>&#9888; Zn/Cuが低すぎます</span>");
  } else if (zn_cu > 6.0) {
      messages.push("<span style='color: firebrick;'>&#9888; Zn/Cuが高すぎます</span>");
  } else {
      messages.push("<span style='color: darkgreen;'>&check; Zn/Cuは適正です</span>");
  }

  //体重比
  if (total_bw < 1.5) {
      messages.push("<span style='color: darkblue;'>&#9888; 総量が少ないです</span>");
  } else if (total_bw > 2.5) {
      messages.push("<span style='color: firebrick;'>&#9888; 総量が過剰です</span>");
  } else {
      messages.push("<span style='color: darkgreen;'>&check; 総量は適正です</span>");
  }

  alertEl.innerHTML = messages.join("<br>");


  // 合計表用の計算
  let sum1 = 0, sum2 = 0, totalSum = 0;
  document.querySelectorAll("#feed-body tr").forEach(tr => {
    const val1 = parseFloat(tr.querySelector(".feed-amount1").value || 0);
    const val2 = parseFloat(tr.querySelector(".feed-amount2").value || 0);
    sum1 += val1;
    sum2 += val2;
    totalSum += (val1 + val2) * 2;
  });

  document.getElementById("sum-body").innerHTML = `
    <tr>
      <td><b>合計</b></td>
      <td><input type="number" class="sum" value="${sum1.toFixed(2)}" readonly>kg</td></td>
      <td><input type="number" class="sum" value="${sum2.toFixed(2)}" readonly>kg</td></td>
      <td><input type="number" class="sum" value="${totalSum.toFixed(2)}" readonly>kg</td></td>
    </tr>
  `;
}


// リセット
function resetInputs() {
  const rows = document.querySelectorAll("#feed-body tr");
  rows.forEach((tr, i) => {
    const feed = feeds[i];
    const input1 = tr.querySelector(".feed-amount1");
    const input2 = tr.querySelector(".feed-amount2");
    const total = tr.querySelector(".feed-total");

    // 初期値を設定
    input1.value = feed.default1 || "";
    input2.value = feed.default2 || "";

    total.value = ((parseFloat(input1.value || 0) + parseFloat(input2.value || 0)) * 2).toFixed(2);
  });
  calculate();

	let sum1 = 0, sum2 = 0;
	  document.querySelectorAll("#feed-body tr").forEach(tr=>{
	    sum1 += parseFloat(tr.querySelector(".feed-amount1").value || 0);
	    sum2 += parseFloat(tr.querySelector(".feed-amount2").value || 0);
	    const totalInput = tr.querySelector(".feed-total");
	    totalInput.value = ((parseFloat(tr.querySelector(".feed-amount1").value||0)+parseFloat(tr.querySelector(".feed-amount2").value||0))*2).toFixed(2);
	  });
	  document.getElementById("sum1").innerText = sum1.toFixed(2);
	  document.getElementById("sum2").innerText = sum2.toFixed(2);
	  document.getElementById("totalSum").innerText = ((sum1+sum2)*2).toFixed(2);


}

window.onload = () => {
  createRows();
  calculate();
  document.getElementById("reset-btn").addEventListener("click", resetInputs);
  document.getElementById("weight").addEventListener("change", calculate);
  document.getElementById("work").addEventListener("change", calculate);
};
</script>
</body>
</html>
